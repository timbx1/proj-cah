{"ast":null,"code":"var _jsxFileName = \"D:\\\\Webprog\\\\proj-cah\\\\src\\\\JoinedGame.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport config from './config.json';\nimport { Status } from './Status';\nimport { Hilfe } from './Hilfe';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction JoinedGame(props) {\n  _s();\n\n  const playerData = props.pData;\n  const gameid = props.gId;\n  const [players, setPlayers] = useState([]);\n  const [buttonRefresh, setRefresh] = useState(\"Refresh\");\n  useEffect(() => {\n    getGameData();\n  }, []);\n\n  async function goToGame() {\n    props.changeUi(2, playerData, gameid);\n  }\n\n  async function startGame() {\n    console.log(\"start\");\n    const msg = {\n      player: playerData.id,\n      action: \"start\"\n    };\n\n    try {\n      await axios.patch(`${config.preUrl}games/${gameid}/${playerData.id}`, msg);\n      goToGame();\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async function checkIfRunning(gameData, index) {\n    const interval = setInterval(async () => {\n      try {\n        const response = await axios.get(`${config.preUrl}games/`);\n\n        if (response.data.games[index].running) {\n          clearInterval(interval);\n          goToGame();\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }, 5000);\n  }\n\n  function showPlayers(gameData) {\n    const index = gameData.findIndex(game => game.id === gameid);\n    const pList = [];\n    pList.push( /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \" \"\n    }, \"p1\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this));\n    pList.push(players.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"| \", user.name, \" \"]\n    }, user.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 39\n    }, this)));\n\n    if (gameData[index].owner.id === playerData.id) {\n      pList.push( /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" \"\n      }, \"p2\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 18\n      }, this));\n      pList.push( /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startGame,\n        children: \"START GAME\"\n      }, \"onlyowner\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 18\n      }, this));\n      setPlayers(pList);\n    } else {\n      pList.push( /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: \"Wait for the owner to Start the Game\"\n      }, \"p3\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 18\n      }, this));\n      setPlayers(pList);\n      checkIfRunning(gameData[index], index);\n    }\n  }\n\n  async function getGameData() {\n    setRefresh(\"Refreshing...\");\n\n    try {\n      const response = await axios.get(`${config.preUrl}games/`);\n      console.log(response.data.games);\n      showPlayers(response.data.games);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setRefresh(\"Refresh\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Players: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getGameData,\n      disabled: buttonRefresh === \"Refreshing...\",\n      children: buttonRefresh\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Hilfe, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Status, {\n      gId: gameid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: players\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(JoinedGame, \"3s4aGtPlKPZTRz35NP6o9piNpZY=\");\n\n_c = JoinedGame;\nexport default JoinedGame;\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinedGame\");","map":{"version":3,"names":["React","useState","useEffect","axios","config","Status","Hilfe","JoinedGame","props","playerData","pData","gameid","gId","players","setPlayers","buttonRefresh","setRefresh","getGameData","goToGame","changeUi","startGame","console","log","msg","player","id","action","patch","preUrl","error","checkIfRunning","gameData","index","interval","setInterval","response","get","data","games","running","clearInterval","showPlayers","findIndex","game","pList","push","map","user","name","owner","color"],"sources":["D:/Webprog/proj-cah/src/JoinedGame.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport config from './config.json';\r\nimport { Status } from './Status';\r\nimport { Hilfe } from './Hilfe';\r\n\r\nfunction JoinedGame(props) {\r\n  const playerData = props.pData;\r\n  const gameid = props.gId;\r\n  const [players, setPlayers] = useState([]);\r\n  const [buttonRefresh, setRefresh] = useState(\"Refresh\");\r\n\r\n  useEffect(() => {\r\n    getGameData();\r\n  }, []);\r\n\r\n  async function goToGame() {\r\n    props.changeUi(2, playerData, gameid);\r\n  }\r\n\r\n  async function startGame() {\r\n    console.log(\"start\");\r\n    const msg = { player: playerData.id, action: \"start\" };\r\n    try {\r\n      await axios.patch(`${config.preUrl}games/${gameid}/${playerData.id}`, msg);\r\n      goToGame();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async function checkIfRunning(gameData, index) {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const response = await axios.get(`${config.preUrl}games/`);\r\n        if (response.data.games[index].running) {\r\n          clearInterval(interval);\r\n          goToGame();\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }, 5000);\r\n  }\r\n\r\n  function showPlayers(gameData) {\r\n    const index = gameData.findIndex(game => game.id === gameid);\r\n    const pList = [];\r\n    pList.push(<p key={\"p1\"}> </p>);\r\n    pList.push(players.map((user) => (<div key={user.id}>| {user.name} </div>)));\r\n\r\n    if (gameData[index].owner.id === playerData.id) {\r\n      pList.push(<p key={\"p2\"}> </p>);\r\n      pList.push(<button key={\"onlyowner\"} onClick={startGame}>START GAME</button>);\r\n      setPlayers(pList);\r\n    } else {\r\n      pList.push(<p key={\"p3\"} style={{ color: 'red' }}>Wait for the owner to Start the Game</p>);\r\n      setPlayers(pList);\r\n      checkIfRunning(gameData[index], index);\r\n    }\r\n  }\r\n\r\n  async function getGameData() {\r\n    setRefresh(\"Refreshing...\");\r\n    try {\r\n      const response = await axios.get(`${config.preUrl}games/`);\r\n      console.log(response.data.games);\r\n      showPlayers(response.data.games);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setRefresh(\"Refresh\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <label>Players: </label>\r\n      <button onClick={getGameData} disabled={buttonRefresh === \"Refreshing...\"}>{buttonRefresh}</button>\r\n      <Hilfe />\r\n      <Status gId={gameid} />\r\n      <div>{players}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default JoinedGame;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}