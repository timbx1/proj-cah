{"ast":null,"code":"import _slicedToArray from\"D:/Webprog/proj-cah/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from'react';import axios from'axios';import config from'./config.json';import{Hilfe}from'./Hilfe';import Pack from'./Pack';import PacksView from'./PacksView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreateGame(props){var goalInRef=useRef();var _useState=useState(10),_useState2=_slicedToArray(_useState,2),goalPoints=_useState2[0],setGoalPoints=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),packs=_useState4[0],setPacks=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),currentPacks=_useState6[0],setCurrentPacks=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),packDiv=_useState8[0],setPackDiv=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showPacks=_useState10[0],setShowPacks=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showPacksView=_useState12[0],setShowPacksView=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),errorMsg=_useState14[0],setErrorMsg=_useState14[1];// Funktion zum Abrufen von Packs über die API und Anzeigen der ausgewählten Packs\nfunction getPacks(packsToFetch){Promise.all(packsToFetch.map(function(packId){return axios.get(config.preUrl+'packs/'+packId);})).then(function(responses){var packsObjects=responses.map(function(response){return response.data;});setCurrentPacks(packsObjects);createPacks(currentPacks);}).catch(function(error){console.error('Fehler beim Abrufen von Packs:',error);});}// Funktion zum Hinzufügen einer Pack-ID zur ausgewählten Packliste\nfunction addId(id){var arr=packs;arr.push(id);setPacks(arr);console.log(id);}// Funktion zum Entfernen einer Pack-ID aus der ausgewählten Packliste\nfunction removeId(id){console.log(id);var arr=packs.filter(function(packId){return packId!==id;});setPacks(arr);}// Funktion zum Erstellen von Pack-Komponenten für die Anzeige\nfunction createPacks(pArr){var pList=pArr.map(function(eintrag){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\" \"}),/*#__PURE__*/_jsx(Pack,{usePack:false,packName:eintrag.name,packId:eintrag.id,bcCount:eintrag.blackCardCount,wcCount:eintrag.whiteCardCount})]},eintrag.id);});setPackDiv(pList);}// Funktion zum Anzeigen/Verbergen der ausgewählten Packs\nfunction handleShowPacks(){if(!showPacks){getPacks(packs);setShowPacks(true);}else{setPackDiv([]);setShowPacks(false);}}// Funktion zum Anzeigen/Verbergen der Packauswahlansicht\nfunction handleChoosePacks(){setShowPacksView(!showPacksView);}// Funktion zum Erstellen eines neuen Spiels und Weiterleiten zu diesem\nfunction handleCreateGame(){setErrorMsg('');console.log(goalPoints);if(goalPoints>0&&goalPoints<100){if(packs.length>0){postGame(props.pData.id,packs,parseInt(goalPoints));}else{setErrorMsg('Packs dürfen nicht leer sein.');}}else{setErrorMsg('Ungültige Punkte - Wert zwischen 0 und 100 erforderlich.');}}// Funktion zum Senden von Spielinformationen an die API\nfunction postGame(owner,packs,goal){var gameData={owner:owner,packs:packs,goal:goal};var Jstring=JSON.stringify(gameData);var msg=JSON.parse(Jstring);axios.post(config.preUrl+'games/',msg).then(function(response){props.changeUi(1,props.pData,response.data.id);}).catch(function(error){console.error('Fehler beim Erstellen des Spiels:',error);});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Hilfe,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Punkte Ziel: \"}),/*#__PURE__*/_jsx(\"input\",{ref:goalInRef,type:\"text\",value:goalPoints,onChange:function onChange(e){return setGoalPoints(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{style:{color:'red'},children:errorMsg})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleShowPacks,children:showPacks?'Verwendete Packs ausblenden':'Verwendete Packs anzeigen'}),/*#__PURE__*/_jsx(\"div\",{children:packDiv}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleChoosePacks,children:showPacksView?'Packauswahl ausblenden':'Packs für das Spiel auswählen'})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleCreateGame(props.pData);},children:\"Lobby starten\"})}),showPacksView&&/*#__PURE__*/_jsx(PacksView,{addId:addId,removeId:removeId,usePack:true})]});}export default CreateGame;","map":{"version":3,"names":["React","useRef","useState","axios","config","Hilfe","Pack","PacksView","CreateGame","props","goalInRef","goalPoints","setGoalPoints","packs","setPacks","currentPacks","setCurrentPacks","packDiv","setPackDiv","showPacks","setShowPacks","showPacksView","setShowPacksView","errorMsg","setErrorMsg","getPacks","packsToFetch","Promise","all","map","packId","get","preUrl","then","responses","packsObjects","response","data","createPacks","catch","error","console","addId","id","arr","push","log","removeId","filter","pArr","pList","eintrag","name","blackCardCount","whiteCardCount","handleShowPacks","handleChoosePacks","handleCreateGame","length","postGame","pData","parseInt","owner","goal","gameData","Jstring","JSON","stringify","msg","parse","post","changeUi","e","target","value","color"],"sources":["D:/Webprog/proj-cah/src/CreateGame.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport config from './config.json';\r\nimport { Hilfe } from './Hilfe';\r\nimport Pack from './Pack';\r\nimport PacksView from './PacksView';\r\n\r\nfunction CreateGame(props) {\r\n  const goalInRef = useRef();\r\n  const [goalPoints, setGoalPoints] = useState(10);\r\n  const [packs, setPacks] = useState([]);\r\n  const [currentPacks, setCurrentPacks] = useState([]);\r\n  const [packDiv, setPackDiv] = useState();\r\n  const [showPacks, setShowPacks] = useState(false);\r\n  const [showPacksView, setShowPacksView] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n\r\n  // Funktion zum Abrufen von Packs über die API und Anzeigen der ausgewählten Packs\r\n  function getPacks(packsToFetch) {\r\n    Promise.all(\r\n      packsToFetch.map((packId) =>\r\n        axios.get(config.preUrl + 'packs/' + packId)\r\n      )\r\n    )\r\n      .then((responses) => {\r\n        const packsObjects = responses.map((response) => response.data);\r\n        setCurrentPacks(packsObjects);\r\n        createPacks(currentPacks);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Fehler beim Abrufen von Packs:', error);\r\n      });\r\n  }\r\n\r\n  // Funktion zum Hinzufügen einer Pack-ID zur ausgewählten Packliste\r\n  function addId(id) {\r\n    let arr = packs;\r\n    arr.push(id);\r\n    setPacks(arr);\r\n    console.log(id);\r\n  }\r\n\r\n  // Funktion zum Entfernen einer Pack-ID aus der ausgewählten Packliste\r\n  function removeId(id) {\r\n    console.log(id);\r\n    let arr = packs.filter((packId) => packId !== id);\r\n    setPacks(arr);\r\n  }\r\n\r\n  // Funktion zum Erstellen von Pack-Komponenten für die Anzeige\r\n  function createPacks(pArr) {\r\n    let pList = pArr.map((eintrag) => (\r\n      <div key={eintrag.id}>\r\n        <p> </p>\r\n        <Pack usePack={false} packName={eintrag.name} packId={eintrag.id} bcCount={eintrag.blackCardCount} wcCount={eintrag.whiteCardCount} />\r\n      </div>\r\n    ));\r\n    setPackDiv(pList);\r\n  }\r\n\r\n  // Funktion zum Anzeigen/Verbergen der ausgewählten Packs\r\n  function handleShowPacks() {\r\n    if (!showPacks) {\r\n      getPacks(packs);\r\n      setShowPacks(true);\r\n    } else {\r\n      setPackDiv([]);\r\n      setShowPacks(false);\r\n    }\r\n  }\r\n\r\n  // Funktion zum Anzeigen/Verbergen der Packauswahlansicht\r\n  function handleChoosePacks() {\r\n    setShowPacksView(!showPacksView);\r\n  }\r\n\r\n  // Funktion zum Erstellen eines neuen Spiels und Weiterleiten zu diesem\r\n  function handleCreateGame() {\r\n    setErrorMsg('');\r\n    console.log(goalPoints)\r\n    if (goalPoints > 0 && goalPoints < 100) {\r\n      if (packs.length > 0) {\r\n        postGame(props.pData.id, packs, parseInt(goalPoints));\r\n      } else {\r\n        setErrorMsg('Packs dürfen nicht leer sein.');\r\n      }\r\n    } else {\r\n      setErrorMsg('Ungültige Punkte - Wert zwischen 0 und 100 erforderlich.');\r\n    }\r\n  }\r\n\r\n  // Funktion zum Senden von Spielinformationen an die API\r\n  function postGame(owner, packs, goal) {\r\n    let gameData = {\r\n      owner: owner,\r\n      packs: packs,\r\n      goal: goal\r\n    };\r\n    let Jstring = JSON.stringify(gameData);\r\n    var msg = JSON.parse(Jstring);\r\n    axios.post(config.preUrl + 'games/', msg)\r\n      .then((response) => {\r\n        props.changeUi(1, props.pData, response.data.id);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Fehler beim Erstellen des Spiels:', error);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Hilfe></Hilfe>\r\n      <div>\r\n        <label>Punkte Ziel: </label>\r\n        <input\r\n          ref={goalInRef}\r\n          type=\"text\"\r\n          value={goalPoints}\r\n          onChange={(e) => setGoalPoints(e.target.value)}\r\n        />\r\n        <label style={{ color: 'red' }}>{errorMsg}</label>\r\n      </div>\r\n      <button onClick={handleShowPacks}>\r\n        {showPacks ? 'Verwendete Packs ausblenden' : 'Verwendete Packs anzeigen'}\r\n      </button>\r\n      <div>{packDiv}</div>\r\n      <div>\r\n        <button onClick={handleChoosePacks}>\r\n          {showPacksView ? 'Packauswahl ausblenden' : 'Packs für das Spiel auswählen'}\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button onClick={() => handleCreateGame(props.pData)}>Lobby starten</button>\r\n      </div>\r\n      {showPacksView && <PacksView addId={addId} removeId={removeId} usePack={true}></PacksView>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateGame;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}