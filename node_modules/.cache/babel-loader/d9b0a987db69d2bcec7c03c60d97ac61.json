{"ast":null,"code":"import _slicedToArray from\"D:/Webprog/proj-cah/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useState,useEffect}from'react';import axios from'axios';import config from'./config.json';import{Status}from'./Status';import{Hilfe}from'./Hilfe';import'./JoinedGame.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JoinedGame(props){// Deklaration der benötigten Zustände und Variablen\nvar playerData=props.pData;var gameid=props.gId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),players=_useState2[0],setPlayers=_useState2[1];// Zustand zur Speicherung der Spielerliste\nvar _useState3=useState(\"Refresh\"),_useState4=_slicedToArray(_useState3,2),buttonRefresh=_useState4[0],setRefresh=_useState4[1];// Zustand für den Text auf dem Aktualisierungsbutton\nuseEffect(function(){getGameData();},[]);// Funktion, um zum Spielbildschirm zu wechseln\nfunction goToGame(){console.log('start_game');props.changeUi(2,playerData,gameid);}// Funktion, um das Spiel zu starten\nfunction startGame(){console.log(\"start\");var Jstring='{\"player\":'+playerData.id+',\"action\":\"start\"}';var msg=JSON.parse(Jstring);axios.patch(config.preUrl+'games/'+gameid+'/'+playerData.id,msg).then(function(response){goToGame();});}// Funktion, um zu überprüfen, ob das Spiel läuft\nfunction checkIfRunning(game,index){axios.get(config.preUrl+'games/').then(function(response){if(!response.data.games[index].running){setTimeout(checkIfRunning(game,index),5000);}else{goToGame();}});}// Funktion zum Anzeigen der Spielerliste und Starten des Spiels\nfunction showPlayers(gameData){var index=0;for(var i=0;i<gameData.length;i++){if(gameData[i].id==gameid){index=i;}}var players=gameData[index].players;var pList=[];pList.push(/*#__PURE__*/_jsx(\"p\",{children:\" \"},\"p1\"));pList.push(players.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{children:[\"|  \",user.name,\" \"]},user.id);}));// Überprüfen, ob der Spieler der Besitzer des Spiels ist\nif(gameData[index].owner.id==playerData.id){pList.push(/*#__PURE__*/_jsx(\"p\",{children:\" \"},\"p2\"));pList.push(/*#__PURE__*/_jsx(\"button\",{onClick:startGame,children:\"START GAME\"},\"onlyowner\"));setPlayers(pList);}else{pList.push(/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"Warte auf den Besitzer, um das Spiel zu starten\"},\"p3\"));setPlayers(pList);checkIfRunning(gameData[index],index);}}// Funktion zum Abrufen der Spieldaten\nfunction getGameData(){setRefresh(\"Refresh\");axios.get(config.preUrl+'games/').then(function(response){console.log(response.data.games);showPlayers(response.data.games);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:getGameData,id:\"reload\",className:\"button\",children:buttonRefresh}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:/*#__PURE__*/_jsx(Status,{gId:gameid})}),/*#__PURE__*/_jsx(\"div\",{className:\"help\",children:/*#__PURE__*/_jsx(Hilfe,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-list\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Spieler: \"}),players]})]})]});}export default JoinedGame;","map":{"version":3,"names":["React","Component","useState","useEffect","axios","config","Status","Hilfe","JoinedGame","props","playerData","pData","gameid","gId","players","setPlayers","buttonRefresh","setRefresh","getGameData","goToGame","console","log","changeUi","startGame","Jstring","id","msg","JSON","parse","patch","preUrl","then","response","checkIfRunning","game","index","get","data","games","running","setTimeout","showPlayers","gameData","i","length","pList","push","map","user","name","owner","color"],"sources":["D:/Webprog/proj-cah/src/JoinedGame.js"],"sourcesContent":["import React, { Component, useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport config from './config.json'\r\nimport { Status } from './Status'\r\nimport { Hilfe } from './Hilfe'\r\nimport './JoinedGame.css';\r\n\r\nfunction JoinedGame(props) {\r\n  // Deklaration der benötigten Zustände und Variablen\r\n  const playerData = props.pData\r\n  const gameid = props.gId\r\n  const [players , setPlayers] = useState() // Zustand zur Speicherung der Spielerliste\r\n  const [buttonRefresh , setRefresh] = useState(\"Refresh\") // Zustand für den Text auf dem Aktualisierungsbutton\r\n\r\n  useEffect(()=>{\r\n    getGameData()\r\n  },[])\r\n\r\n  // Funktion, um zum Spielbildschirm zu wechseln\r\n  function goToGame(){\r\n    console.log('start_game')\r\n    props.changeUi(2,playerData,gameid)\r\n  }\r\n\r\n  // Funktion, um das Spiel zu starten\r\n  function startGame (){\r\n    console.log(\"start\")\r\n    let Jstring = '{\"player\":'+playerData.id+',\"action\":\"start\"}' \r\n    let msg = JSON.parse(Jstring)\r\n    axios.patch(config.preUrl+'games/'+gameid+'/'+playerData.id,msg).then(response => {\r\n      goToGame()\r\n    })\r\n  }\r\n\r\n  // Funktion, um zu überprüfen, ob das Spiel läuft\r\n  function checkIfRunning (game, index){\r\n    axios.get(config.preUrl+'games/').then(response => {\r\n      \r\n      if(!response.data.games[index].running){\r\n        setTimeout(checkIfRunning(game ,index), 5000) \r\n      }\r\n      else{\r\n        goToGame()\r\n      }\r\n      \r\n    }) \r\n  }\r\n\r\n  // Funktion zum Anzeigen der Spielerliste und Starten des Spiels\r\n  function showPlayers(gameData){\r\n    var index = 0;\r\n    for(let i = 0; i < gameData.length; i++){\r\n      if (gameData[i].id == gameid){\r\n        index = i\r\n      }\r\n    }\r\n    var players = gameData[index].players\r\n    var pList = []\r\n    pList.push(<p key={\"p1\"}> </p>)\r\n    pList.push(players.map((user) => (<div key={user.id}>|  {user.name} </div>)))\r\n\r\n    // Überprüfen, ob der Spieler der Besitzer des Spiels ist\r\n    if (gameData[index].owner.id == playerData.id){\r\n      pList.push(<p key={\"p2\"}> </p>)\r\n      pList.push(<button key={\"onlyowner\"} onClick={startGame}>START GAME</button>)\r\n      setPlayers(pList)\r\n    }\r\n    else{\r\n      pList.push(<p key={\"p3\"} style={{color:'red'}}>Warte auf den Besitzer, um das Spiel zu starten</p>)\r\n      setPlayers(pList)\r\n      checkIfRunning(gameData[index],index)\r\n    }\r\n  }\r\n\r\n  // Funktion zum Abrufen der Spieldaten\r\n  function getGameData (){\r\n    setRefresh(\"Refresh\")\r\n    axios.get(config.preUrl+'games/').then(response => {\r\n      console.log(response.data.games)\r\n      showPlayers(response.data.games)\r\n    })\r\n  }\r\n  \r\n  return (\r\n    <div className=\"container\">\r\n      <button onClick={getGameData} id=\"reload\" className=\"button\">{buttonRefresh}</button>\r\n      <div className=\"content\">\r\n        <div className=\"top-section\">\r\n          <div className=\"status\">\r\n            <Status gId={gameid} />\r\n          </div>\r\n          <div className=\"help\">\r\n            <Hilfe  />\r\n          </div>\r\n        </div>\r\n        <div className=\"player-list\">\r\n          <label className=\"label\">Spieler: </label>\r\n          {players}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default JoinedGame\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}